/* 
SCPOP version 1.0.0
2022 - Dagan Lev - https://github.com/daganlev/scpop
Licensed under the MIT license.
*/
var scpop={scpopShowing:!1,pops:[]};function scpopLoad(e){scpop.pops.push({currentSlide:0});var t=scpop.pops.length-1,o=[];document.querySelectorAll(e+" a").forEach((function(e){var r=o.length,c=e;if(/\.(jpg|jpeg|png|webp|gif|svg)$/.test(c.href.toLowerCase())){var p="";null!=e.getAttribute("title")&&""!=e.getAttribute("title")&&(p='<div class="scpop__item_caption">'+e.getAttribute("title")+"</div>"),o.push('<div class="scpop__item" id="scpop_'+t+"_"+r+'"><img alt="" data-src="'+c.href+'" />'+p+"</div>"),c.href="javascript:scpopShow("+t+","+r+");",c.removeAttribute("target")}if(c.classList.contains("scpopiframe")){p="";null!=e.getAttribute("title")&&""!=e.getAttribute("title")&&(p='<div class="scpop__item_caption">'+e.getAttribute("title")+"</div>");var s=c.href,i=s.match(/watch\?v\=(.*)$/i);i&&(s="https://www.youtube.com/embed/"+i[1]+"?autoplay=1"),o.push('<div class="scpop__item" id="scpop_'+t+"_"+r+'"><iframe frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen data-src="'+s+'"></iframe>'+p+"</div>"),c.href="javascript:scpopShow("+t+","+r+");",c.removeAttribute("target")}}));var r=document.createElement("div");r.className="scpop scpop"+t,r.innerHTML='<div class="scpop__toolbar">\n                            <a class="scpop__toolbar_close" href="javascript:scpopClose('+t+');">&#215;</a>\n                            <a class="scpop__toolbar_prev" href="javascript:scpopPrev('+t+');">&#171;</a>\n                            <a class="scpop__toolbar_next" href="javascript:scpopNext('+t+');">&#187;</a>\n                        </div>\n                        <div class="scpop__inner">'+o.join("")+"</div>",document.body.appendChild(r);var c=new IntersectionObserver((function(e,o){e.forEach((function(e){e.isIntersecting&&scpop.scpopShowing&&(e.target.querySelector("img")&&null!=e.target.querySelector("img").getAttribute("data-src")&&(e.target.querySelector("img").setAttribute("src",e.target.querySelector("img").getAttribute("data-src")),e.target.querySelector("img").removeAttribute("data-src")),e.target.querySelector("iframe")&&null!=e.target.querySelector("iframe").getAttribute("data-src")&&(e.target.querySelector("iframe").setAttribute("src",e.target.querySelector("iframe").getAttribute("data-src")),e.target.querySelector("iframe").removeAttribute("data-src")),scpop.pops[t].currentSlide=parseInt(e.target.id.replace("scpop_"+t+"_","")),scpopcheckPrevNextButtons(t))}))}),{root:document.querySelector(".scpop"+t+" .scpop__inner"),rootMargin:"0px",threshold:.6});document.querySelectorAll(".scpop"+t+" .scpop__item").forEach((function(e){c.observe(e)}))}function scpopSlideTo(e,t){scpop.pops[e].currentSlide=t,document.querySelector(".scpop"+e+" .scpop__inner").scrollLeft=document.querySelectorAll(".scpop"+e+" .scpop__item")[t].offsetLeft}function scpopShow(e,t){if(document.querySelector(".scpop"+e+" .scpop__inner").style.scrollBehavior="unset",0==t){var o=document.querySelectorAll(".scpop"+e+" .scpop__item")[0].querySelector("img");o&&null!=o.getAttribute("data-src")&&(o.setAttribute("src",o.getAttribute("data-src")),o.removeAttribute("data-src"));var r=document.querySelectorAll(".scpop"+e+" .scpop__item")[0].querySelector("iframe");r&&null!=r.getAttribute("data-src")&&(r.setAttribute("src",r.getAttribute("data-src")),r.removeAttribute("data-src")),scpopcheckPrevNextButtons(e)}scpop.scpopShowing=!0,scpopSlideTo(e,t),document.body.classList.add("scpopshow"),document.querySelector(".scpop"+e).classList.add("show"),window.setTimeout((function(){document.querySelector(".scpop"+e+" .scpop__inner").style.scrollBehavior="smooth"}),300)}function scpopClose(e){scpop.scpopShowing=!1,document.querySelector(".scpop"+e).style.opacity="0",window.setTimeout((function(){document.querySelector(".scpop"+e).removeAttribute("style"),document.body.classList.remove("scpopshow"),document.querySelector(".scpop"+e).classList.remove("show"),document.querySelectorAll(".scpop .scpop__item iframe").forEach((function(e){null!=e.getAttribute("src")&&(e.setAttribute("data-src",e.getAttribute("src")),e.removeAttribute("src"))}))}),300)}function scpopPrev(e){var t=document.querySelectorAll(".scpop"+e+" .scpop__item").length,o=scpop.pops[e].currentSlide;--o<0&&(o=t-1),scpopSlideTo(e,o)}function scpopNext(e){var t=document.querySelectorAll(".scpop"+e+" .scpop__item").length,o=scpop.pops[e].currentSlide;++o>t-1&&(o=0),scpopSlideTo(e,o)}function scpopcheckPrevNextButtons(e){var t=document.querySelectorAll(".scpop"+e+" .scpop__item").length,o=scpop.pops[e].currentSlide,r=document.querySelector(".scpop"+e+" .scpop__toolbar_prev"),c=document.querySelector(".scpop"+e+" .scpop__toolbar_next");r.style.display="none",c.style.display="none",o>0&&(r.style.display="block"),o<t-1&&(c.style.display="block")}window.addEventListener("load",(function(){var e=document.querySelector('script[src$="scpop.js"').src.replace(".js",".css"),t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}));